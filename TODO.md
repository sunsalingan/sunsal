# 프로젝트 작업 일지 (RankEats / Sunsal)

## 🚀 작업 인계 사항 (Handover Note - 2026-01-07)
현재 **v1.1 안정화 버전**으로 롤백된 상태입니다. 지도, 식당 검색, 리스트 클릭 등 주요 기능은 정상 작동하지만, **리뷰 모달의 '한줄평' 입력 기능**은 아직 연결되지 않은 상태(Dummy or Props missing)일 수 있습니다.
다음 작업 시 **리뷰 입력 기능 연결**부터 시작하면 됩니다.

**긴급 복구 내용:**
*   `App.jsx`가 수정 도중 문법 에러(Syntax Error) 및 백화 현상을 일으켜, `App_backup_v1.1.jsx` 코드로 덮어씌워 복구했습니다.
*   현재 버전은 앱 실행 및 기본 탐색이 보장되는 "안전한 상태"입니다.

---

## 🚀 작업 인계 사항 (Handover Note - 2026-01-06)
현재 **공페이지(Blank Page) 이슈**가 해결된 상태로, `App.jsx`에 임시로 데이터 시딩(Seeder) 로직이 포함되어 있습니다 (Inlined). 정상적으로 실행되며 데이터 리셋 버튼도 작동합니다.

**다음 작업 우선순위:**

2.  **기능 개발**: 소셜 로그인 연동이나 실제 데이터 영속화 작업을 시작할 수 있습니다.

---

## 📌 프로젝트 개요
맛집 랭킹 및 지도 서비스 'RankEats' (프로젝트명: sunsal) 개발 및 배포

## ✅ 완료된 작업 (Done)
*   **긴급 버그 수정 (Critical)**:
    *   **공페이지(Blank Page) 오류 해결 (2025-01-06)**:
        *   증상: 앱 실행 시 흰 화면만 뜨고 아무런 내용이 렌더링되지 않음.
        *   원인: `utils/seeder.js` 파일이 `lib/firebase.js`에서 Export되지 않은 함수(`getDocs`, `deleteDoc`)를 Import하려고 시도하여, 앱 초기화 단계에서 모듈 로딩 에러 발생.
        *   해결: `seeder.js` 파일을 Import하는 방식을 제거하고, 데이터 초기화 및 시딩 로직(`resetAndSeedData`)을 `App.jsx` 내부의 `handleResetAndSeed` 함수로 **직접 구현(Inlining)**하여 의존성 문제를 해결함.
        *   결과: 지도와 UI가 정상적으로 표시되며, '데이터 리셋' 버튼도 정상 작동함.
*   **지도 및 리스트 개선 (2025-01-07)**:
    *   **마커 및 배지 디자인 통일**: 모든 마커와 배지 색상을 Indigo(#4f46e5)로 통일하여 시인성 개선.
    *   **실시간 클러스터링**: 줌/이동 시 즉각적인 클러스터 분해/병합 적용.
    *   **리스트 중복 제거**: 사이드바 랭킹 리스트에서 동일 식당 집계(Aggregation) 처리 완료.
*   **배포**: Firebase Hosting을 통한 애플리케이션 배포 완료
*   **버그 수정**:
    *   '친구' 탭 진입 시 발생하던 흰 화면(White Screen) 오류 해결
    *   '친구' 탭 진입 시 발생하던 흰 화면(White Screen) 오류 해결
    *   식당 상세 모달 및 각종 모달의 '닫기(X)' 버튼 기능 정상화
*   **모달 기능 복구 (2026-01-07)**:
    *   `RestaurantDetailModal`: 더미 컴포넌트에서 실제 컴포넌트로 교체 및 연동 완료.
    *   `RestaurantSearchModal`: 검색 결과 클릭 시 동작 오류 수정.
    *   `ReviewModal`: UI 연동 테스트 (입력 버그 수정 시도 중 롤백).
*   **지도 기능 고도화**:
    *   네이버 지도 API 연동 및 클러스터링 기반 지인 지도 구현
    *   줌 레벨/지도 이동에 따른 실시간 랭킹 필터링 기능 추가
    *   카테고리별 마커 필터링 및 클러스터 내 맛집 리스트 조회 기능
*   **UI/UX 개선**:
    *   친구 사이드바 우측 고정 및 스타일 개선
    *   지도 마커 라벨 겹침 문제 해결 (+N 뱃지 스타일 적용)
*   **저장소 관리**:
    *   GitHub 원격 저장소 연결 및 전체 코드 업로드 (`sunsalingan/sunsal`)
    *   불필요한 중복 디렉토리(`src/src/`) 및 압축 파일 정리

## 📋 예정된 작업 (To Do) - 이어하기 가이드
*   **환경 설정 (새 장비에서 시작 시)**:
    1.  `node_modules` 설치: `npm install`
    2.  개발 서버 실행: `npm run dev`
    3.  `sanity check` 통과 여부 확인 (브라우저에서 앱 정상 로딩 확인)
*   **코드 리팩토링 (권장)**:

*   **기능 고도화**:
    *   실제 Firebase Firestore 연동을 통한 데이터 영속화
    *   앱 설명서 작성 (사용자 가이드) - **[New]**
    *   카카오톡/구글 소셜 로그인 연동
    *   친구 초대 및 수락 시스템 구축
*   **유지보수**:
    *   컴포넌트 단위 테스트 코드 추가
    *   반응형 웹 디자인 완성도 제고 (모바일 최적화)

## 💬 작업 히스토리 요약
1.  **배포 및 UI 디버깅**: Firebase 배포 후 발생한 주요 UI 버그를 해결했습니다.
2.  **지도 기능 강화**: 단순 지도 표시를 넘어, 랭킹 정보를 시각적으로 그룹화하고 탐색하기 쉽게 고도화했습니다.
3.  **공페이지 해결 (Seeder 이슈)**: 데이터 시딩 유틸리티의 모듈 의존성 문제를 해결하여 앱 안정성을 확보했습니다.
4.  **환경 정리 및 문서화**: 깃허브 업로드를 위해 프로젝트 구조를 최적화하고 README와 TODO를 최신화했습니다.
5.  **모달 상호작용 디버깅 (2026-01-07)**: 모든 모달(상세, 리뷰, 검색, 프로필)을 활성화하는 과정에서 발생한 충돌을 해결하기 위해 단계적으로 디버깅했으며, 최종적으로 안정적인 v1.1 시점으로 복구하여 마무리지었습니다.
6.  **코드 리팩토링 (2026-01-07)**: `App.jsx`의 데이터 시딩 로직을 `utils/seeder.js`로 분리하고, `lib/firebase.js`의 exports를 정리하여 모듈 의존성을 개선했습니다.
7.  **가고싶어요(Wishlist) 및 UI 개선 (2026-01-07)**:
    - **가고싶어요 기능**: 찜하기/해제, 사이드바 탭, 실시간 점수 연동.
    - **UI 개선**: 내가 리뷰한 식당 배지(Check Badge) 표시.
    - **리팩토링**: `AuthContext`, `DataContext` 분리 및 모듈화.
    - **버그 수정**: 랭킹 점수 로직 통일 (`0.0001` tolerance), 리뷰 모달 데이터 소스 수정.

## 🐛 알려진 문제 (Known Issues) - **[Fix Required]**
- **점수 불일치 이슈 (Score Discrepancy)**: 
  - 증상: 찜 리스트(Wishlist)와 전체 랭킹(Global Ranking)의 점수가 다르게 표시되는 경우가 있음 (예: 9.7 vs 9.0).
  - 원인: 두 뷰에서 사용하는 집계(Aggregation) 로직이나 필터링 조건이 미세하게 다를 수 있음.
  - 조치 예정: 집에 가서 `DataContext`의 `activeReviews` 필터링 로직과 `displayedRestaurants` 집계 로직을 완벽하게 일치시킬 예정.

## 📌 다음 작업 가이드
1.  **점수 로직 디버깅**: 위 Known Issue 해결.
2.  **배포**: 모바일 접근을 위한 Firebase Hosting 배포.
